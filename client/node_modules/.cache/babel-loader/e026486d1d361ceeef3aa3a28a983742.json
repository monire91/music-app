{"ast":null,"code":"import _defineProperty from \"D:\\\\music-website\\\\server\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"D:\\\\music-website\\\\server\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\music-website\\\\server\\\\client\\\\src\\\\pages\\\\user\\\\SignUp.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Layout from \"../../components/Layout\";\nimport { Link } from \"react-router-dom\";\nimport { signed } from \"../../actions\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst Register = () => {\n  const _useState = useState({\n    name: '',\n    email: '',\n    password: '',\n    password2: '',\n    error: '',\n    success: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        formData = _useState2[0],\n        setFormData = _useState2[1];\n\n  const name = formData.name,\n        email = formData.email,\n        password = formData.password,\n        password2 = formData.password2,\n        error = formData.error,\n        success = formData.success;\n  const isLogged = useSelector(state => state.isLogged);\n  const dispatach = useDispatch();\n\n  const clickSubmit = async event => {\n    event.preventDefault();\n\n    if (password !== password2) {\n      setFormData(_objectSpread({}, formData, {\n        error: 'Passwords do not match'\n      }));\n      return '';\n    } else {\n      setFormData(_objectSpread({}, formData));\n      const newUser = {\n        email,\n        password\n      };\n      const FetchRequest = await fetch('http://localhost:5000/api/register', {\n        method: 'POST',\n        body: JSON.stringify(newUser),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        return res.json();\n      }).then(response => {\n        console.log(response.message);\n\n        if (!response.message) {\n          console.log('success');\n          setFormData(_objectSpread({}, formData, {\n            success: true,\n            email: '',\n            password: '',\n            password2: ''\n          }));\n          dispatach(signed());\n          console.log(dispatach(signed));\n        } else {\n          setFormData(_objectSpread({}, formData, {\n            error: response.message,\n            success: false\n          }));\n        }\n      }).catch(error => console.log('Error:', error));\n    }\n  };\n\n  const handleChange = name => event => {\n    setFormData(_objectSpread({}, formData, {\n      error: false,\n      [name]: event.target.value,\n      success: false\n    }));\n  };\n\n  const showError = () => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, error));\n\n  const showSuccess = () => React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    style: {\n      display: success ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"New account has been created successfully. Please sign in.\");\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Layout, {\n    title: \"Register\",\n    description: \"Sign up to this website\",\n    className: \"container col-md-8 offset-md-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, showSuccess()), React.createElement(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, showError()), React.createElement(\"form\", {\n    action: \"\",\n    className: \"container col-8 offset-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    placeholder: \"Name\",\n    onChange: handleChange('name'),\n    type: \"text\",\n    className: \"form-control\",\n    value: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    placeholder: \"Email\",\n    value: email,\n    onChange: handleChange('email'),\n    type: \"email\",\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    placeholder: \"Password\",\n    value: password,\n    onChange: handleChange('password'),\n    type: \"password\",\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    placeholder: \"Repeat Password\",\n    value: password2,\n    onChange: handleChange('password2'),\n    type: \"password\",\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    onClick: clickSubmit,\n    className: \"btn btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Submit\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Already have an account? \", React.createElement(Link, {\n    to: \"./signin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Sign In\"), \" \")));\n};\n\nexport default Register;","map":{"version":3,"sources":["D:/music-website/server/client/src/pages/user/SignUp.js"],"names":["React","useState","useEffect","useCallback","Layout","Link","signed","useDispatch","useSelector","Register","name","email","password","password2","error","success","formData","setFormData","isLogged","state","dispatach","clickSubmit","event","preventDefault","newUser","FetchRequest","fetch","method","body","JSON","stringify","headers","then","res","json","response","console","log","message","catch","handleChange","target","value","showError","display","showSuccess"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\r\n\r\nimport Layout from \"../../components/Layout\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport { signed } from \"../../actions\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\n\r\n\r\nconst Register = () => {\r\n\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        password2: '',\r\n        error: '',\r\n        success: false\r\n    })\r\n\r\n\r\n    const {name, email, password, password2, error, success} = formData;\r\n    const isLogged = useSelector(state => state.isLogged)\r\n    const dispatach = useDispatch();\r\n\r\n    const clickSubmit = async event => {\r\n        event.preventDefault()\r\n\r\n        if (password !== password2) {\r\n            setFormData({...formData, error: 'Passwords do not match'})\r\n\r\n            return ''\r\n        } else {\r\n            setFormData({...formData})\r\n            const newUser = {\r\n                email,\r\n                password\r\n            }\r\n\r\n            const FetchRequest = await fetch('http://localhost:5000/api/register', {\r\n                method: 'POST',\r\n                body: JSON.stringify(newUser),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n                .then(res => {\r\n                    return res.json()\r\n                })\r\n                .then(response => {\r\n                    console.log(response.message);\r\n\r\n                    if (!response.message) {\r\n                        console.log('success')\r\n                        setFormData({...formData, success: true, email: '', password: '', password2: ''})\r\n                        dispatach(signed())\r\n                        console.log( dispatach(signed) )\r\n                    } else {\r\n                        setFormData({...formData, error: response.message, success: false})\r\n\r\n                    }\r\n                })\r\n                .catch(error => console.log('Error:', error))\r\n        }\r\n\r\n    }\r\n\r\n    const handleChange = name => event => {\r\n        setFormData({...formData, error: false, [name]: event.target.value, success: false })\r\n    }\r\n\r\n    const showError = () => (\r\n        <div>\r\n\r\n            {/*<h3>{values.error} </h3>*/}\r\n            <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\r\n                {error}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-success\" style={{display: success ? '' : 'none'}}>\r\n            New account has been created successfully. Please sign in.\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <Layout\r\n                title=\"Register\"\r\n                description=\"Sign up to this website\"\r\n                className=\"container col-md-8 offset-md-2\"\r\n            />\r\n\r\n            {/*<div className=\"text-center\">{values.success ? showSuccess() : showError()}</div>*/}\r\n            <div className=\"text-center\">\r\n                {showSuccess()}\r\n            </div>\r\n            <div className=\"text-center\">\r\n                {showError()}\r\n            </div>\r\n\r\n            <form action=\"\" className=\"container col-8 offset-2\">\r\n                <div className=\"form-group\">\r\n                    {/*<label className=\"text-muted\">Name</label>*/}\r\n                    <input\r\n                        placeholder=\"Name\"\r\n                        onChange={handleChange('name')}\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                        value={name}\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    {/*<label className=\"text-muted\">Email</label>*/}\r\n                    <input\r\n                        placeholder=\"Email\"\r\n                        value={email}\r\n                        onChange={handleChange('email')}\r\n                        type=\"email\" className=\"form-control\"\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    {/*<label className=\"text-muted\">Password</label>*/}\r\n                    <input\r\n                        placeholder=\"Password\"\r\n                        value={password}\r\n                        onChange={handleChange('password')} type=\"password\" className=\"form-control\"/>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    {/*<label className=\"text-muted\">Password</label>*/}\r\n                    <input\r\n                        placeholder=\"Repeat Password\"\r\n                        value={password2}\r\n                        onChange={handleChange('password2')} type=\"password\" className=\"form-control\"/>\r\n                </div>\r\n                <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\r\n                <p>Already have an account? <Link to=\"./signin\" >Sign In</Link> </p>\r\n            </form>\r\n\r\n        </div>\r\n\r\n\r\n    );\r\n}\r\nexport default Register;\r\n\r\n"]},"metadata":{},"sourceType":"module"}