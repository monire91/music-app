{"ast":null,"code":"import _defineProperty from \"D:\\\\music-website\\\\server\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"D:\\\\music-website\\\\server\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\music-website\\\\server\\\\client\\\\src\\\\pages\\\\user\\\\SignIn.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Layout from \"../../components/Layout\";\nimport { Link } from \"react-router-dom\";\nimport axios from 'axios';\n\nconst Signin = () => {\n  const _useState = useState({\n    email: '',\n    password: '',\n    error: '',\n    success: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        formData = _useState2[0],\n        setFormData = _useState2[1];\n\n  const name = formData.name,\n        email = formData.email,\n        password = formData.password,\n        password2 = formData.password2,\n        error = formData.error,\n        success = formData.success;\n\n  const clickSubmit = async event => {\n    event.preventDefault();\n    setFormData(_objectSpread({}, formData));\n    await axios.interceptors.response.use(response => {\n      // do something with the response data\n      // console.log('Response was received');\n      return response;\n    }, error => {\n      // handle the response error\n      // console.log(error.response.data.message)\n      setFormData(_objectSpread({}, formData, {\n        error: error.response.data.message,\n        success: false\n      }));\n      return Promise.reject(error.response);\n    });\n    await axios({\n      method: 'post',\n      url: 'http://localhost:5000/api/login',\n      data: {\n        email,\n        password\n      }\n    }).then(response => {\n      console.log(response);\n      setFormData(_objectSpread({}, formData, {\n        success: true\n      }));\n      localStorage.setItem('myData', response.data.token);\n      localStorage.setItem('type', response.data.type);\n    }, error => {\n      console.log(error);\n    }); //         const FetchRequest = await fetch('http://localhost:5000/api/login', {\n    //             method: 'POST',\n    //             body: JSON.stringify(User),\n    //             credentials: \"same-origin\",\n    //             headers: {\n    //                 'Content-Type': 'application/json'\n    //             }\n    //         })\n    //             .then(res => {\n    //                 if (res.status === 200) {\n    //                     console.log('success')\n    //                     console.log(res.headers['auth-token'])\n    //                     setFormData({...formData, success: true})\n    //                 }\n    //                 else {\n    //                     console.log(res.status)\n    //                 return res.json()\n    //                 }\n    //             })\n    //             .then(res => {\n    //\n    //                 if (!success) {\n    //                     setFormData({...formData, error: res.message, success: false})\n    //                 }\n    //\n    //                 // (!response.message ? setFormData({...formData, error: response.message, success: false}) : setFormData({...formData, success: true}))\n    //\n    //             })\n    //             .catch(error => console.log('Error G:', error))\n  };\n\n  const handleChange = name => event => {\n    setFormData(_objectSpread({}, formData, {\n      error: false,\n      [name]: event.target.value\n    }));\n  };\n\n  const showError = () => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, error));\n\n  const showSuccess = () => React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    style: {\n      display: formData.success ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"You are signed in\");\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(Layout, {\n    title: \"Sign In\",\n    description: \"Sign into your account\",\n    className: \"container col-md-8 offset-md-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, showSuccess()), React.createElement(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, showError()), React.createElement(\"form\", {\n    action: \"\",\n    className: \"container col-8 offset-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    placeholder: \"Email\",\n    value: email,\n    onChange: handleChange('email'),\n    type: \"email\",\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    placeholder: \"Password\",\n    value: password,\n    onChange: handleChange('password'),\n    type: \"password\",\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    onClick: clickSubmit,\n    className: \"btn btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, \"Sign In\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Don't have an account? \", React.createElement(Link, {\n    to: \"./register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Register\"), \" \")));\n};\n\nexport default Signin;","map":{"version":3,"sources":["D:/music-website/server/client/src/pages/user/SignIn.js"],"names":["React","useState","useEffect","useCallback","Layout","Link","axios","Signin","email","password","error","success","formData","setFormData","name","password2","clickSubmit","event","preventDefault","interceptors","response","use","data","message","Promise","reject","method","url","then","console","log","localStorage","setItem","token","type","handleChange","target","value","showError","display","showSuccess"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\r\nimport Layout from \"../../components/Layout\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport axios from 'axios'\r\n\r\nconst Signin = () => {\r\n\r\n    const [formData, setFormData] = useState({\r\n\r\n        email: '',\r\n        password: '',\r\n\r\n        error: '',\r\n        success: false\r\n    })\r\n\r\n    const {name, email, password, password2, error, success} = formData;\r\n\r\n\r\n    const clickSubmit = async event => {\r\n        event.preventDefault()\r\n\r\n            setFormData({...formData})\r\n\r\n            await axios.interceptors.response.use((response) => {\r\n                // do something with the response data\r\n                // console.log('Response was received');\r\n\r\n                return response;\r\n            }, error => {\r\n                // handle the response error\r\n                // console.log(error.response.data.message)\r\n                setFormData({...formData, error: error.response.data.message, success: false})\r\n                return Promise.reject(error.response);\r\n            });\r\n\r\n            await axios({\r\n                method: 'post',\r\n                url: 'http://localhost:5000/api/login',\r\n                data: { email, password }\r\n            })\r\n                .then((response) => {\r\n                    console.log(response);\r\n                    setFormData({...formData, success: true})\r\n                    localStorage.setItem('myData', response.data.token);\r\n                    localStorage.setItem('type', response.data.type);\r\n            },\r\n                (error) => {\r\n                    console.log(error);\r\n            });\r\n\r\n    //         const FetchRequest = await fetch('http://localhost:5000/api/login', {\r\n    //             method: 'POST',\r\n    //             body: JSON.stringify(User),\r\n    //             credentials: \"same-origin\",\r\n    //             headers: {\r\n    //                 'Content-Type': 'application/json'\r\n    //             }\r\n    //         })\r\n    //             .then(res => {\r\n    //                 if (res.status === 200) {\r\n    //                     console.log('success')\r\n    //                     console.log(res.headers['auth-token'])\r\n    //                     setFormData({...formData, success: true})\r\n    //                 }\r\n    //                 else {\r\n    //                     console.log(res.status)\r\n    //                 return res.json()\r\n    //                 }\r\n    //             })\r\n    //             .then(res => {\r\n    //\r\n    //                 if (!success) {\r\n    //                     setFormData({...formData, error: res.message, success: false})\r\n    //                 }\r\n    //\r\n    //                 // (!response.message ? setFormData({...formData, error: response.message, success: false}) : setFormData({...formData, success: true}))\r\n    //\r\n    //             })\r\n    //             .catch(error => console.log('Error G:', error))\r\n    }\r\n\r\n    const handleChange = name => event => {\r\n        setFormData({...formData, error: false, [name]: event.target.value})\r\n    }\r\n\r\n    const showError = () => (\r\n        <div>\r\n\r\n            {/*<h3>{values.error} </h3>*/}\r\n            <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\r\n                {error}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-success\" style={{display: formData.success ? '' : 'none'}}>\r\n            You are signed in\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <Layout\r\n                title=\"Sign In\"\r\n                description=\"Sign into your account\"\r\n                className=\"container col-md-8 offset-md-2\"\r\n            />\r\n\r\n            {/*<div className=\"text-center\">{values.success ? showSuccess() : showError()}</div>*/}\r\n            <div className=\"text-center\">\r\n                {showSuccess()}\r\n            </div>\r\n            <div className=\"text-center\">\r\n                {showError()}\r\n            </div>\r\n\r\n            <form action=\"\" className=\"container col-8 offset-2\">\r\n                <div className=\"form-group\">\r\n\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    {/*<label className=\"text-muted\">Email</label>*/}\r\n                    <input\r\n                        placeholder=\"Email\"\r\n                        value={email}\r\n                        onChange={handleChange('email')}\r\n                        type=\"email\" className=\"form-control\"\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    {/*<label className=\"text-muted\">Password</label>*/}\r\n                    <input\r\n                        placeholder=\"Password\"\r\n                        value={password}\r\n                        onChange={handleChange('password')} type=\"password\" className=\"form-control\"/>\r\n                </div>\r\n\r\n                <button onClick={clickSubmit} className=\"btn btn-primary\">Sign In</button>\r\n                <p>Don't have an account? <Link to=\"./register\" >Register</Link> </p>\r\n            </form>\r\n\r\n        </div>\r\n\r\n\r\n    )\r\n}\r\nexport default Signin;\r\n\r\n"]},"metadata":{},"sourceType":"module"}